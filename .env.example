# UTM Backend Environment Configuration
# Documentation: Main site at http://localhost
# Admin Demo: http://localhost/demo
# API: http://localhost/api

# ============================================================================
# Application Settings
# ============================================================================
APP_ENV=development
APP_PORT=8080

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_USER=utmuser
DB_PASSWORD=utmpassword
DB_NAME=utm_backend
DB_SSL_MODE=disable

# ============================================================================
# SuperTokens Configuration
# ============================================================================
SUPERTOKENS_CONNECTION_URI=http://supertokens:3567
SUPERTOKENS_API_KEY=your-super-secret-api-key-change-in-production

# API Domain - where the backend API is accessible
API_DOMAIN=http://localhost

# Website Domain - where the frontend app is accessible (now at /demo)
WEBSITE_DOMAIN=http://localhost/demo

#http://10.20.146.127

# API Base Path - where SuperTokens auth endpoints are mounted
API_BASE_PATH=/api/auth

# ============================================================================
# Google OAuth (Optional)
# ============================================================================
# Leave empty to disable Google OAuth
# Get credentials from: https://console.cloud.google.com/
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================================================
# Background Jobs (Asynq)
# ============================================================================
ASYNQ_CONCURRENCY=10
ASYNQ_QUEUES=critical:6,default:3,low:1

# ============================================================================
# Email Configuration
# ============================================================================
# For local development, uses MailHog
EMAIL_PROVIDER=smtp
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=noreply@utm.local

# MailHog web interface: http://localhost/inbox

# ============================================================================
# Invitation Settings
# ============================================================================
INVITATION_EXPIRY_HOURS=72
# Base URL for invitation acceptance (frontend at /demo now)
INVITATION_BASE_URL=http://localhost/demo/accept-invite

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=debug
LOG_FORMAT=json

# ============================================================================
# Tenant Initialization
# ============================================================================
# Comma-separated list of services to initialize for new tenants
TENANT_INIT_SERVICES=

# ============================================================================
# Production Notes
# ============================================================================
# When deploying to production:
# 1. Change APP_ENV to "production"
# 2. Update API_DOMAIN to your production domain (e.g., https://api.yourdomain.com)
# 3. Update WEBSITE_DOMAIN to your production frontend URL with /demo (e.g., https://yourdomain.com/demo)
# 4. Update INVITATION_BASE_URL to production URL (e.g., https://yourdomain.com/demo/accept-invite)
# 5. Set strong SUPERTOKENS_API_KEY (20+ characters)
# 6. Configure Google OAuth credentials if needed
# 7. Enable DB_SSL_MODE (require or verify-full)
# 8. Use production email provider (SendGrid, Mailgun, etc.)
# 9. Set LOG_LEVEL to "info" or "warn"
# 10. Configure Redis password if required

# ============================================================================
# Service URLs (for reference)
# ============================================================================
# Documentation:     http://localhost        (docs-website)
# Admin Demo:        http://localhost/demo   (frontend React app)
# Backend API:       http://localhost/api    (Go API)
# MailHog Inbox:     http://localhost/inbox  (email testing)
# Direct Frontend:   http://localhost:3000   (bypass nginx, dev only)
# Direct API:        http://localhost:8080   (bypass nginx, dev only)
# Direct Docs:       http://localhost:5173   (bypass nginx, dev only)
